# [L4D2] HUD Display Manager
*Author: gabuch2*

*Version: 1.0.2*

*Plugin for Left 4 Dead 2 that manages HUD display to show nearest teammates instead of campaign default actors.*

Left 4 Dead 2 has a hard limit of how many players can display in the HUD at the same time. The real hard limit is 4 (not counting you) but this is rather buggy and will always show the first actors of the campaign. This plugin manipulates the data sent to the clients, displaying the nearest 3 teammates instead.

## Key Features
- Dynamically updates HUD to show nearest teammates
- Replaces the buggy default behavior of showing first campaign actors
- Configurable update intervals to balance smoothness vs performance
- Supports per-player SendProxy functionality
- Better error handling for player disconnections and map changes

## Dependencies
- [SendProxy Manager](https://forums.alliedmods.net/showthread.php?t=169795) with **per_player** support
  - This plugin was mostly made and tested extensively with TheByKotik's version in mind
  - Other versions may theoretically work but intended behavior is not guaranteed
  - Binaries for Left 4 Dead 2 Linux are provided [here](https://github.com/szGabu/Left4SendProxy)
-  [Left 4 DHooks Direct](https://forums.alliedmods.net/showthread.php?t=321696) (1.135 or newer, optional) 

## Supported Games
- Left 4 Dead 2
- Theoretically can work on Left 4 Dead 1 but it is untested

## ConVars
- **sm_l4d2_hud_display_enabled**
  - Enables the plugin
    - Default: 1
- **sm_l4d2_hud_display_query_time**
  - Determines the time between position checks
  - Less is smoother, but may lead to increased overhead
  - 3.0 is the recommended value but you can adjust it as needed
    - Default: 3
- **sm_l4d2_hud_display_display_fourth**
  - Displays four survivors instead of three in the HUD.
  - This is quite buggy, as it was not intended in the base game. 
  - Custom survivors outside the base game won't refresh their portraits and will instead display the last character in their position.
    - Default: 0
- **sm_l4d2_hud_display_hard_reload_map_start**
  - Hard reloads the plugin on map start. 
  - Overkill solution, but it may fix the reported problem of invisible HUD when the map changes.
    - Default: 1

## ConVars
- **sm_resethud**
  - Hard reloads the plugin, may only be used every 60 seconds.
    - Required flag: Kick

## Changelog
- **1.0.2**
  - Added more unhook/rehook instances, aiming to fix dissapearing HUD bug
  - Added sm_l4d2_hud_display_hard_reload_map_start, when enabled it will hard reload the plugin. It's overkill but I haven't been able to find the root cause of this bug
  - Added admin command **sm_resethud**, manually hard reloads the plugin, it will lag the server for like a second, only usable every 60 seconds. Requires the Kick flag
  - Added ConVar **sm_l4d2_hud_display_display_fourth**, it will make the plugin use the otherwise unused fourth survivor slot. This is quite buggy, as it was not intended in the base game. Custom survivors outside the base game won't refresh their portraits and will instead display the last character in their position
  - Added support for Extended Scoreboard (Unreleased at the time of writing this) to avoid possible conflicts.
- **1.0.1**
  - Better checks to avoid possible errors when unhooking players and map ending
  - Included an alternative compile option to give support to SendProxy includes with an optional per_player parameter
- **1.0.0**
  - Initial Release

## Download and Source Code
-   You can download an up to date .smx binary from **[![](https://forums.alliedmods.net/image-proxy/59dfef4187a448378ae1cfd2097a4a346af1a371/68747470733a2f2f692e696d6775722e636f6d2f366b43375a66382e706e67) GitHub Releases](https://github.com/szGabu/L4D2_HudDisplayManager/releases)**. These binaries are generated by GitHub and the workflow can be checked out in **[![](https://forums.alliedmods.net/image-proxy/59dfef4187a448378ae1cfd2097a4a346af1a371/68747470733a2f2f692e696d6775722e636f6d2f366b43375a66382e706e67) GitHub Actions](https://github.com/szGabu/L4D2_HudDisplayManager/blob/main/.github/workflows/manual.yml)**.
-   If you wish to compile it yourself:
    -   Download all requirements, plus the .sp file.
    -   Place include files in the /scripting/includes directory.
    -   Compile the plugin.
-   Copy the .smx file into the plugins folder in your Sourcemod installation.

## Demo Video
You can see the plugin in action: [YouTube Demo](https://www.youtube.com/watch?v=JpMuDVSoDhE)
